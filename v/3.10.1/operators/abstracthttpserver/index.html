<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../favicon.ico">
  
  <title>Abstract HTTP Server Operator - DataTorrent Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Abstract HTTP Server Operator";
    var mkdocs_page_input_path = "operators/abstracthttpserver.md";
    var mkdocs_page_url = "/operators/abstracthttpserver/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script type="text/javascript" src="../../js/highlight.pack.js" defer></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44586211-2', 'docs.datatorrent.com');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> DataTorrent Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">DataTorrent RTS</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Demos</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../demos/">Running Apps</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../sandbox/">Sandbox</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Cloud Integration</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../aws_emr_manual/">AWS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../azure_deployment/">Azure</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Development</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../create/">Creating Applications</a>
                </li>
                <li class="">
                    
    <a class="" href="../../beginner/">Beginner's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../../demo_videos/">Videos</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../tutorials/topnwords/">Top N Words</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tutorials/salesdemo/">Sales Dimensions</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../apex_development_setup/">Apex Development Setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configure_IDE/">Generate New Project in IDE</a>
                </li>
                <li class="">
                    
    <a class="" href="../../application_development/">Applications</a>
                </li>
                <li class="">
                    
    <a class="" href="../../application_packages/">Application Packages</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration_packages/">Configuration Packages</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Operator Development</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../operator_development/">Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../operator_development_ref/">Reference</a>
                </li>
    </ul>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Operators</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../library_operators/">Operators List</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../drools_operator/">Drools Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../python_operator/">Python Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../PMML_operator/">PMML Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../tcpinputoperator/">TCP Input Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../eventhubinput/">Event Hub Input Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../eventhuboutput/">Event Hub Output Operator</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Abstract HTTP Server Operator</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#about-abstracthttpserver-operator">About AbstractHttpServer Operator</a></li>
    

    <li class="toctree-l4"><a href="#ports">Ports</a></li>
    

    <li class="toctree-l4"><a href="#testing">Testing</a></li>
    

    <li class="toctree-l4"><a href="#workflow-of-the-operator">Workflow of the Operator</a></li>
    

    <li class="toctree-l4"><a href="#supplementary-classes">Supplementary Classes</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#serverdeploymentconfig">ServerDeploymentConfig</a></li>
        
            <li><a class="toctree-l5" href="#handlercollection">HandlerCollection</a></li>
        
        </ul>
    

    <li class="toctree-l4"><a href="#configurations">Configurations</a></li>
    

    <li class="toctree-l4"><a href="#partitioning">Partitioning</a></li>
    

    <li class="toctree-l4"><a href="#using-the-operator">Using the Operator</a></li>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../azure_blob/">Azure Blob Storage Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../aoooperator/">Analytics Output Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../elasticsearch/">Elasticsearch Output Operator</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../block_reader/">Block Reader</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../deduper/">Deduper</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../dimensions_computation/">Dimension Computation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../file_output/">File Output</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../file_splitter/">File Splitter</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../hdht/">HDHT</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../kafkaInputOperator/">Kafka Input</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../snapshot_server/">Snapshot Server</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../partition/">Partitioning</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app_data_framework/">App Data Framework</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dtgateway_api/">REST API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">App Templates</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/common/import-launch/">Import and Launch App-template</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/common/customize/">Customizing an app-template</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/database-to-database-sync/">Database-to-database-sync</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/hdfs-line-copy/">HDFS-line-copy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/hdfs-part-file-copy/">HDFS-part-file-copy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/hdfs-to-hdfs-filter-transform/">HDFS-to-HDFS-filter-transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/kafka-to-cassandra-filter-transform/">Kafka-to-Cassandra-Filter-Transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/kafka-to-database-sync/">Kafka-to-Database-sync</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/kafka-to-hdfs-filter-transform/">Kafka-to-HDFS-Filter-Transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/kafka-to-kafka-filter-transform/">Kafka-to-Kafka-Filter-Transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/kinesis-to-redshift/">Kinesis-to-Redshift</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/kinesis-to-s3/">Kinesis-to-S3</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/s3-to-hdfs-sync/">S3-to-HDFS-sync</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/0.10.0/s3-to-redshift/">S3-to-HDFS-Filter-Transform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/database-to-hdfs/">Database dump to HDFS App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/database-to-database-sync/">Database to Database Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/hdfs-sync/">HDFS Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/hdfs-line-copy/">HDFS to HDFS Line Copy App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/hdfs-to-kafka-sync/">HDFS to Kafka Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/hdfs-to-s3-sync/">HDFS to S3 Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/kafka-to-database-sync/">Kafka to Database Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/kafka-to-hdfs-filter/">Kafka to HDFS Filter App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/kafka-to-hdfs-sync/">Kafka to HDFS Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/kinesis-to-s3/">Kinesis to S3 App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../app-templates/s3-to-hdfs-sync/">S3 to HDFS Sync App</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Applications</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../omni_channel_fraud_app/">Omni Channel Fraud Prevention Application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Accounttakeover/">Account Takeover Prevention Application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../quickstartlaunchfpa/">Quick Start Guide - Omni-Channel Fraud Prevention Application</a>
                </li>
                <li class="">
                    
    <a class="" href="../../quickstartlaunchato/">Quick Start Guide - Account Takeover Prevention Application</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Services</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../cep_workbench/">CEP Workbench</a>
                </li>
                <li class="">
                    
    <a class="" href="../../oas_dashboards/">OAS Dashboards</a>
                </li>
                <li class="">
                    
    <a class="" href="../../oas/">Online Analytics Service (OAS)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Platform</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../rts/">RTS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../application_configurations/">Application Configurations</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dtmanage/">dtManage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dtdashboard/">dtDashboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dtgateway/">dtGateway</a>
                </li>
                <li class="">
                    
    <a class="" href="../../services/">Services</a>
                </li>
                <li class="">
                    
    <a class="" href="../../jar_artifacts/">JAR Artifacts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../apex/">Apache Apex</a>
                </li>
                <li class="">
                    
    <a class="" href="../../apex_malhar/">Apache Apex-Malhar</a>
                </li>
                <li class="">
                    
    <a class="" href="../../appbackplane/">Application Backplane</a>
                </li>
                <li class="">
                    
    <a class="" href="../../storeandreplay/">Store and Replay Feature</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Deployment and Operations</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Licensing/">Licensing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installation/">Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/">Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dtgateway_security/">Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dtgateway_systemalerts/">System Alerts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../apexcli/">Apex CLI</a>
                </li>
                <li class="">
                    
    <a class="" href="../../troubleshooting/">Troubleshooting</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../release_notes/">Release Notes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../glossary/">Glossary</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../additional_docs/">Resources</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DataTorrent Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Development &raquo;</li>
        
      
        
          <li>Operators &raquo;</li>
        
      
    
    <li>Abstract HTTP Server Operator</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="about-abstracthttpserver-operator">About AbstractHttpServer Operator</h2>
<p>AbstractHttpServer operator helps developer to implement HTTP services and run them as part of operator.  It provides a way to host Jetty HTTP Servlet server as an . You can develop custom Servlets and plug-in those using these classes: ServletContextHolder and ServletHolder.</p>
<p>This operator can be used as an input or output operator based on how you can extend it.  This operator can be used to receive data from Mobile/ Web clients as well as from clients using WebSocket connections.</p>
<p>To use this operator, you must extend it and implement the <em>getHandlers</em> method to define the collection of handlers to handle HTTP requests.</p>
<p>This operator is available under DT Plus license.</p>
<h2 id="ports">Ports</h2>
<p>The following port is available for the AbstractHttpServerOperator operator:</p>
<table>
<thead>
<tr>
<th><strong>Port Type</strong></th>
<th><strong>Port Name</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Output Port</td>
<td>deployBroadcastOutport</td>
<td>Emits information about the current partition including, hostname, services started or not, partition mask, partitionId.  If the partition has more than one partitionId assigned, then that many tuples are emitted.  All this information is emitted using POJO object of the type ServerDeploymentConfig.</td>
</tr>
</tbody>
</table>
<h2 id="testing">Testing</h2>
<p>AbstractHttpServer  is tested with the following components:</p>
<ul>
<li>Cloudera Hadoop version 5.8.2 along with Apache Hadoop version 2.6.0</li>
<li>Java version 1.7 and above</li>
<li>Embedded Jetty version 9.2.11.v20150529.</li>
</ul>
<h1 id="workflow-of-the-operator">Workflow of the Operator</h1>
<p>The workflow of the <strong>AbstrractHttpServer</strong>  is as follows:</p>
<ul>
<li>At initialization, the operator loads the handlers that you have provided.</li>
<li>Starts webserver with the defined port.</li>
<li>If the operator is partitioned and the anti-affinity rule is set for the partitions of this operator, partitions of the operator gets deployed on different nodes. This is needed to ensure that two partitions do not share the same TCP port.</li>
</ul>
<h1 id="supplementary-classes">Supplementary Classes</h1>
<p>The following classes are used by the <strong>AbstrractHttpServer</strong> operator:</p>
<h2 id="serverdeploymentconfig">ServerDeploymentConfig</h2>
<table>
<thead>
<tr>
<th>Property Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>hostName</td>
<td>String</td>
<td>This property can be used as the address URL and is specified in the following format by default: <code>protocol://[hostname]:[port]/.</code></td>
</tr>
<tr>
<td>started</td>
<td>boolean</td>
<td>Specifies if the server has started or shut down for the clients.</td>
</tr>
<tr>
<td>mask</td>
<td>int</td>
<td>Specifies the partition mask of the partition of the operator</td>
</tr>
<tr>
<td>partitionId</td>
<td>int</td>
<td>Specifies the partition ID for the current partition of the operator.</td>
</tr>
</tbody>
</table>
<h2 id="handlercollection">HandlerCollection</h2>
<p>You must implement the <em>getHandlers()</em> method on this operator, which returns the <strong>HandlerCollection</strong> object <code>org.eclipse.jetty.server.handler.HandlerCollection</code>. The following example depicts how you implement the <em>gethandlers</em> method:</p>
<pre><code>@Override
public HandlerCollection getHandlers() throws Exception
{
 HandlerCollection handlers = new HandlerCollection(true);
 this.logHandler = new RequestLogHandler();
 DummyRequestLog requestLog = new DummyRequestLog();
 requestLog.setExtended(true);
 requestLog.setLogLatency(true);
 requestLog.setPreferProxiedForAddress(true);
 logHandler.setRequestLog(requestLog);
 handlers.addHandler(logHandler);
 ServletContextHandler handler = new ServletContextHandler();
 handler.addServlet(new ServletHolder(new HeartbeatServlet(&quot;HttpServer&quot;, this.getNodeUrl())), &quot;/health&quot;);
 handlers.addHandler(handler);
 return handlers;
}
</code></pre>

<p>You can also use this operator to develop Websocket operators with some modifications. Two classes are implemented; one for handling data transfer for receiving and sending data over websocket connections and other for creating connections and configuring WebSocketServletFactory.</p>
<p>The following example depicts implementation of <code>getHandlers()</code> method for WebsocketOutput operator.</p>
<pre><code>public HandlerCollection getHandlers() throws UnknownHostException
{
 HandlerCollection handlers = new HandlerCollection(true);
 ServletContextHandler handler = new ServletContextHandler();
 handler.addServlet(new ServletHolder(&quot;ws-events&quot;, new DummyRequestWebsocketServlet(
   180000, 180000, DummyRequestWS.class)), &quot;/ws/*&quot;);
 handlers.addHandler(handler);
 return handlers;

}
</code></pre>

<h3 id="dummyrequestws-example-for-websocketadapter">DummyRequestWS ( Example for WebsocketAdapter ) :</h3>
<p>Object of this class is instantiated for each established websocket connection. You can refer to details about WebSocketAdapter at http://www.eclipse.org/jetty/javadoc/current/org/eclipse/jetty/websocket/api/WebSocketAdapter.html](http://www.eclipse.org/jetty/javadoc/current/org/eclipse/jetty/websocket/api/WebSocketAdapter.html)</p>
<pre><code>import java.io.IOException;
import org.eclipse.jetty.websocket.api.Session;
import org.eclipse.jetty.websocket.api.WebSocketAdapter;

public class DummyRequestWS extends WebSocketAdapter
{
  @Override
  public void onWebSocketConnect(Session sess){}

  @Override
  public void onWebSocketText(String message){}

  @Override
  public void onWebSocketClose(int statusCode, String reason){}

  @Override
  public void onWebSocketError(Throwable cause){}
}
</code></pre>

<h3 id="dummyrequestwebsocketservlet-implementation-example-of-abstractwebsocketservlet">DummyRequestWebsocketServlet Implementation (Example of AbstractWebSocketServlet)</h3>
<pre><code>public class DummyRequestWebsocketServlet extends AbstractWebSocketServlet
{

 public DummyRequestWebsocketServlet(long maxIdleTime, long maxAsyncWriteTimeout, Class wsClazzName)
 {
   super(maxIdleTime, maxAsyncWriteTimeout, wsClazzName);
 }

 @Override
 public void configure(WebSocketServletFactory webSocketServletFactory)
 {
   // set a 10 second timeout
   super.configure(webSocketServletFactory);
   int BUFFER_SIZE = 10240; // 10240 bytes
   webSocketServletFactory.getPolicy().setInputBufferSize(BUFFER_SIZE / 10);
   webSocketServletFactory.getPolicy().setMaxTextMessageSize(BUFFER_SIZE);
   webSocketServletFactory.getPolicy().setMaxTextMessageBufferSize(BUFFER_SIZE * 8);
   webSocketServletFactory.getPolicy().setMaxBinaryMessageSize(BUFFER_SIZE);
   webSocketServletFactory.getPolicy().setMaxBinaryMessageBufferSize(BUFFER_SIZE);
   webSocketServletFactory.getPolicy().setIdleTimeout(getMaxIdleTime());
   webSocketServletFactory.getPolicy().setAsyncWriteTimeout(getMaxAsyncWriteTimeout());

 }
}
</code></pre>

<h1 id="configurations">Configurations</h1>
<p>The following properties must be updated in the <strong>properties.xml</strong> file:</p>
<table>
<thead>
<tr>
<th><strong>Property Name</strong></th>
<th><strong>Description</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>threads</td>
<td>Defines number of threads for the server operator.</td>
<td>dt.operator.[OPNAME].prop.threads</td>
</tr>
<tr>
<td>cooldownSecs</td>
<td>Defines the number of seconds to wait before you shut down the jetty server.</td>
<td>dt.operator.[OPNAME].prop.cooldownSecs</td>
</tr>
<tr>
<td>port</td>
<td>Defines the listening tcp port used by the server.</td>
<td>dt.operator.[OPNAME].prop.port</td>
</tr>
</tbody>
</table>
<p>When you are creating the DAG, you must specify the following configuration:</p>
<pre><code>DummyHttpServerOperator tcpInput = dag.addOperator(&quot;HttpInput&quot;, DummyHttpServerOperator.class);
AffinityRule httpRule = new AffinityRule(AffinityRule.Type.ANTI_AFFINITY, DAG.Locality.NODE_LOCAL, false, &quot;HttpInput&quot;, &quot;HttpInput&quot;);
</code></pre>

<h1 id="partitioning">Partitioning</h1>
<p>This operator implements interface called WebServerPartitionable and requires WebServerPartitioner for static partitioning. Being stateless, this operator does not redistribute any state.</p>
<p>The following configuration must be set in <strong>Properties.xml</strong> for partitioning:</p>
<pre><code>&lt;property&gt;
 &lt;name&gt;dt.operator.[OperatorName].attr.PARTITIONER&lt;/name&gt;
 &lt;value&gt;[FQDN for WebServerPartitioner or One extended from it] :[PARTITION_COUNT]&lt;/value&gt;
&lt;/property&gt;
</code></pre>

<p>For example, the following code depicts a scenario when an  is extended from AbstractHttpServerOperator as DummyServerOperator and DummyWebPartitioner and extends WebServerPartitioner, configuration for specifying 3 partitions for the operator.</p>
<pre><code>&lt;property&gt;
 &lt;name&gt;dt.operator.DummyHttpServer.attr.PARTITIONER&lt;/name&gt;
 &lt;value&gt;com.example.app.DummyWebPartitioner :3&lt;/value&gt;
&lt;/property&gt;
</code></pre>

<h1 id="using-the-operator">Using the Operator</h1>
<p>The following code illustrates, how you can use the operator can be used within an application:
public class DummyHttpServer extends AbstractHttpServerOperator implements InputOperator</p>
<pre><code>{

 @Override
 public HandlerCollection getHandlers() throws Exception
 {
   HandlerCollection handlers = new HandlerCollection(true);
   this.logHandler = new RequestLogHandler();
   DummyRequestLog requestLog = new DummyRequestLog();
   requestLog.setExtended(true);
   requestLog.setLogLatency(true);
   requestLog.setPreferProxiedForAddress(true);
   logHandler.setRequestLog(requestLog);
   handlers.addHandler(logHandler);
   ServletContextHandler handler = new ServletContextHandler();
   handler.addServlet(new ServletHolder(new HeartbeatServlet(&quot;HttpServer&quot;, this.getNodeUrl())), &quot;/health&quot;);
   handlers.addHandler(handler);
   return handlers;
 }
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../azure_blob/" class="btn btn-neutral float-right" title="Azure Blob Storage Operator">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../eventhuboutput/" class="btn btn-neutral" title="Event Hub Output Operator"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  <div class="footer">Copyright &#169; 2018 DataTorrent</div>
  <div class="footer">Apache, Hadoop, Apex, Yarn, HDFS and the Hadoop elephant and Apache project logos are either registered trademarks or trademarks of the Apache Software Foundation in the United States or other countries.</div>
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
  <div class="version-select">
    <div class="version-select__bar">
      v: <span class="version-select__bar-version"></span>
      <i class="fa fa-caret-down"></i>
    </div>
    <div class="version-select__menu">
      <dl class="version-select__menu-versions">
        <dt>Versions</dt>
        <dd><a class="version-select__menu-versions-latest version" href="#">latest</a></dd>
        <!-- append versions here -->
      </dl>
    </div>
  </div>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/require.js" defer></script>
      <script src="../../search/search.js" defer></script>

</body>
</html>
